<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Brigade TRIAGE</title>

  <link rel="stylesheet" href="style.css" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="favicon.png">
  <meta name="theme-color" content="#7C3AED">
</head>

<body>
  <header>Brigade TRIAGE</header>

  <main class="wrap">
    <!-- HOME -->
    <section id="home" class="card">
      <div class="home-logo">
        <div class="logo-text">
          <span class="logo-brigade">Brigade</span>
          <span class="logo-triage">TRIAGE</span>
        </div>
        <div class="logo-sub">Choisis un agent</div>
      </div>

      <div class="spacer"></div>
      <div id="agentButtons"></div>
    </section>

    <!-- WEEK VIEW -->
    <section id="weekView" class="hidden">
      <div class="topbar">
        <div class="row">
          <button id="backBtn">← Retour</button>
          <div class="pill" id="agentName"></div>
        </div>

        <div class="row">
          <select id="yearSelect"></select>
          <select id="weekSelect"></select>
          <button id="prevWeekBtn">◀</button>
          <button id="nextWeekBtn">▶</button>
        </div>
      </div>

      <div class="spacer"></div>

      <div class="card">
        <div class="row-between">
          <div>
            <div class="subtitle" id="weekLabel">Semaine —</div>
            <div class="muted" id="rangeLabel">—</div>
          </div>
          <div class="pill" id="weekTotal">Total semaine : —</div>
        </div>

        <div class="spacer"></div>
        <div id="dayList" class="daylist"></div>
      </div>
    </section>

    <!-- ADMIN WEEK ENTRY -->
    <section id="adminWeekView" class="hidden">
      <div class="topbar">
        <div class="row">
          <button id="adminWeekBackBtn">← Retour</button>
          <div class="pill">Saisie semaine (Admin)</div>
        </div>

        <div class="row">
          <select id="adminYearSelect"></select>
          <select id="adminWeekSelect"></select>
          <button id="adminPrevWeekBtn">◀</button>
          <button id="adminNextWeekBtn">▶</button>
          <button id="adminSaveWeekBtn" class="action">Enregistrer la semaine</button>
        </div>
      </div>

      <div class="spacer"></div>

      <div class="card">
        <div class="row-between">
          <div>
            <div class="subtitle" id="adminWeekLabel">Semaine —</div>
            <div class="muted" id="adminRangeLabel">—</div>
          </div>
          <div class="pill" id="adminSaveStatus">—</div>
        </div>

        <div class="spacer"></div>
        <div class="muted small">
          Astuce : PC = multi-sélection (Ctrl+clic). Mobile = sélection multiple.
        </div>

        <div class="spacer"></div>
        <div id="adminGridWrap" class="admin-grid-wrap"></div>
      </div>
    </section>

    <!-- RECAP VIEW -->
    <section id="recapView" class="hidden">
      <div class="topbar">
        <div class="row">
          <button id="recapBackBtn">← Retour</button>
          <div class="pill" id="recapAgentName"></div>
        </div>
        <div class="row">
          <select id="recapYearSelect"></select>
        </div>
      </div>

      <div class="spacer"></div>

      <div class="card">
        <div class="row-between">
          <div>
            <div class="subtitle">Récap mensuel</div>
            <div class="muted small">Total par mois (année sélectionnée)</div>
          </div>
          <div class="pill" id="recapYearTotal">Total année : —</div>
        </div>

        <div class="spacer"></div>
        <div id="recapGrid" class="recap-grid"></div>
      </div>
    </section>
  </main>

  <!-- bouton admin discret -->
  <button id="adminHiddenBtn" class="admin-hidden-btn" title="Admin"></button>

  <!-- Légende fixe -->
  <div id="legend" class="legend">
    <div class="legend-title">Légende des primes</div>
    <div id="legendItems" class="legend-items"></div>
  </div>

  <script src="app.js?v=admin-week-1"></script>
</body>
</html>
